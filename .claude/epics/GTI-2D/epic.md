---
name: GTI-2D
status: backlog
updated: 2025-09-29T21:11:00Z
progress: 0%
prd: .claude/prds/GTI-2D.md
github: local-repository-mode
---

# Epic: GTI-2D

## Overview

GTI-2D是一款2D俯视角战术射击微信小游戏的技术实现史诗，采用Cocos Creator前端和Node.js+Go后端架构，支持9人实时对战。重点关注快速开发、性能优化和微信平台适配，通过简化架构和复用成熟技术栈来最小化开发复杂度。

## Architecture Decisions

### 核心技术栈
- **前端引擎**: Cocos Creator 3.x + TypeScript
  - 理由：官方微信小游戏支持，成熟的2D游戏开发工具链
  - 优势：可视化编辑器，组件化架构，丰富的物理引擎

- **后端架构**: 微服务分层设计
  - **接入层**: Node.js + Socket.io（实时通信）
  - **游戏逻辑层**: Go微服务（高性能计算）
  - **数据层**: Redis（会话数据） + MySQL（持久化）

- **微信集成**: 微信小游戏云开发
  - 理由：简化后端部署，内置微信API集成
  - 优势：免运维，自动扩容，微信生态深度集成

### 设计模式
- **前端**: ECS（Entity-Component-System）架构
- **后端**: 领域驱动设计（DDD）+ 事件驱动架构
- **网络**: 状态同步 + 客户端预测 + 服务端验证

## Technical Approach

### Frontend Components
1. **游戏核心系统**
   - 场景管理系统（Scene Manager）
   - 角色控制系统（Player Controller）
   - 武器装备系统（Weapon & Equipment）
   - 物理碰撞系统（Physics System）

2. **UI系统**
   - 虚拟摇杆组件（Virtual Joystick）
   - HUD界面（血量、弹药、小地图）
   - 菜单系统（主菜单、设置、排行榜）
   - 背包装备界面（Inventory UI）

3. **网络同步**
   - Socket.io客户端封装
   - 状态同步管理器
   - 延迟补偿算法

### Backend Services
1. **房间服务 (Room Service)**
   - 匹配队列管理
   - 房间生命周期管理
   - 玩家连接状态维护

2. **游戏逻辑服务 (Game Logic Service)**
   - 战斗计算（伤害、碰撞检测）
   - AI行为逻辑
   - 装备掉落算法
   - 撤离条件验证

3. **用户数据服务 (User Data Service)**
   - 角色等级和经验
   - 装备库存管理
   - 好友关系维护
   - 战绩统计

4. **微信集成服务 (WeChat Service)**
   - 授权登录
   - 分享功能
   - 排行榜同步

### Infrastructure
- **部署**: 微信云开发 + 腾讯云CVM
- **监控**: 微信小游戏性能监控 + 自建日志系统
- **CDN**: 腾讯云CDN（静态资源分发）
- **数据库**: 云开发数据库 + Redis集群

## Implementation Strategy

### 开发阶段划分
1. **Phase 1: 核心原型 (4周)**
   - 基础2D角色移动和射击
   - 简单匹配和房间系统
   - 基础UI和网络同步

2. **Phase 2: 完整玩法 (6周)**
   - 装备系统和AI敌人
   - 撤离机制和胜负判定
   - 社交功能集成

3. **Phase 3: 优化发布 (2周)**
   - 性能优化和压力测试
   - 微信平台适配
   - 广告集成和数据统计

### 风险缓解策略
- **网络延迟**: 客户端预测 + 延迟补偿
- **性能瓶颈**: 对象池 + 纹理压缩 + 分包加载
- **微信限制**: 早期原型验证 + 渐进式功能开发

### 测试方法
- **单元测试**: 游戏逻辑核心算法
- **集成测试**: 网络同步和数据一致性
- **压力测试**: 9人房间并发性能
- **用户测试**: 操作体验和游戏平衡性

## Task Breakdown Preview

高级任务类别（限制在10个以内）：

- [ ] **游戏引擎搭建**: Cocos Creator项目初始化、基础场景和角色系统
- [ ] **网络通信架构**: Socket.io集成、状态同步机制、房间管理
- [ ] **核心战斗系统**: 移动控制、射击机制、碰撞检测、伤害计算
- [ ] **装备道具系统**: 装备数据模型、掉落机制、背包UI、装备效果
- [ ] **匹配撤离系统**: 队伍匹配算法、撤离点机制、胜负判定逻辑
- [ ] **AI敌人系统**: AI行为树、寻路算法、难度分级、装备掉落
- [ ] **微信平台集成**: 登录授权、好友系统、分享功能、排行榜
- [ ] **UI界面开发**: 虚拟摇杆、HUD界面、菜单系统、响应式适配
- [ ] **数据持久化**: 用户数据模型、云存储集成、本地缓存策略
- [ ] **性能优化发布**: 资源优化、分包策略、测试部署、广告集成

## Dependencies

### 外部服务依赖
- **微信小游戏平台**: 审核流程、API限制、政策变化
- **腾讯云服务**: CVM实例、CDN、云数据库
- **第三方SDK**: 微信支付、数据统计、广告平台

### 内部团队依赖
- **美术团队**: 角色动画、场景贴图、UI素材、音效资源
- **策划团队**: 游戏平衡性调优、关卡设计、数值配置
- **测试团队**: 兼容性测试、性能测试、用户体验测试

### 技术先决条件
- Cocos Creator 3.x开发环境搭建
- Node.js后端开发环境配置
- 微信开发者账号和小游戏资质
- 云服务器采购和配置

## Success Criteria (Technical)

### 性能基准
- **启动速度**: < 3秒完成资源加载
- **网络延迟**: < 200ms同步延迟
- **内存占用**: < 200MB峰值内存
- **帧率稳定**: ≥ 30FPS在中低端设备

### 质量门槛
- **代码覆盖率**: 核心逻辑 > 80%
- **崩溃率**: < 1%用户会话崩溃
- **网络成功率**: > 95%连接成功率
- **兼容性**: 支持iOS 10+, Android 6+

### 验收标准
- 9人同时在线稳定对战
- 装备系统完整可用
- 微信社交功能正常
- 满足微信小游戏审核要求

## Estimated Effort

### 总体时间线
- **开发周期**: 12周（3个月）
- **测试优化**: 2周
- **发布部署**: 1周
- **总计**: 15周（约3.5个月）

### 资源需求
- **前端开发**: 2人 × 12周 = 24人周
- **后端开发**: 2人 × 10周 = 20人周
- **美术设计**: 2人 × 8周 = 16人周
- **项目管理**: 1人 × 15周 = 15人周

### 关键路径
1. 网络架构搭建（关键依赖）
2. 核心战斗系统（最复杂模块）
3. 微信平台集成（审核风险）
4. 性能优化调试（发布前置条件）

## UI Design Completed ✅
- **Design System**: UI/GTI-2D/design-system/ (4个核心文件)
- **Total Pages**: 25个完整页面和组件
- **Navigation Type**: SPA风格，页面间流畅跳转
- **Platform Support**: 移动端优化，响应式设计
- **Component Library**: 8个专业游戏组件
- **Design Style**: 轻量化军事战术风格

## UI Integration Notes
- **设计系统**: 完整的军事战术风色彩方案（军绿#556B2F + 科技蓝#00CED1）
- **响应式断点**: 320px-767px(mobile), 768px-1023px(tablet), 1024px+(desktop)
- **图片来源**: Unsplash优化，关键词：military, tactical, gaming
- **JavaScript**: 原生JS，虚拟摇杆、HUD、装备系统完整实现
- **CSS框架**: Tailwind CSS 3.x + 自定义军事主题
- **质量评分**: 8.1/10（专业商业级质量）

## UI系统亮点
- **虚拟摇杆系统**: 完整的触摸拖拽，方向计算，回弹动画
- **HUD界面**: 血量条、弹药计数、小地图、队友状态完整实现
- **装备系统**: 稀有度色彩（灰白蓝紫橙），拖拽操作，属性对比
- **社交功能**: 微信集成，好友系统，排行榜，分享功能
- **设置系统**: 完整的游戏设置，无障碍支持，性能优化选项

## Tasks Created ✅
- [ ] 001.md - 项目环境搭建 (parallel: true, 8h)
- [ ] 002.md - 后端架构搭建 (parallel: true, 16h)
- [ ] 003.md - 网络通信系统 (parallel: false, 24h)
- [ ] 004.md - 角色控制和移动系统 (parallel: false, 24h)
- [ ] 005.md - 战斗和射击系统 (parallel: false, 24h)
- [ ] 006.md - 装备和道具系统 (parallel: true, 16h)
- [ ] 007.md - AI敌人系统 (parallel: false, 24h)
- [ ] 008.md - 微信小游戏集成 (parallel: true, 16h)
- [ ] 009.md - 房间匹配和撤离系统 (parallel: false, 24h)
- [ ] 010.md - 性能优化和发布 (parallel: false, 16h)

**总任务数**: 10个
**并行任务**: 4个 (001, 002, 006, 008)
**串行任务**: 6个 (003, 004, 005, 007, 009, 010)
**预估总工作量**: 188小时 (约23.5人天)

## 关键依赖路径
1. **基础设施** → 001,002 → 003 → 004 → 005 → 007 → 009 → 010
2. **装备系统** → 001 → 006 (可与核心开发并行)
3. **微信集成** → 002 → 008 (可与游戏开发并行)

## Next Steps
Ready for local development! 可选择操作：
- 查看本地任务映射: `cat .claude/epics/GTI-2D/local-mapping.md`
- 开始并行开发: 先完成任务001和002
- 配置GitHub远程仓库后可运行: `/pm:epic-sync GTI-2D`

### 风险缓冲
- 预留20%时间缓冲应对未知技术难题
- 关键模块并行开发减少依赖阻塞
- 早期Demo验证降低后期返工风险